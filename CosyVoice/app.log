2025-02-28 15:00:32,135 DEBUG Starting new HTTPS connection (1): www.modelscope.cn:443
2025-02-28 15:00:32,452 DEBUG https://www.modelscope.cn:443 "GET /api/v1/models/iic/CosyVoice2-0.5B/revisions HTTP/1.1" 200 205
2025-02-28 15:00:32,865 DEBUG https://www.modelscope.cn:443 "GET /api/v1/models/iic/CosyVoice2-0.5B/repo/files?Revision=master&Recursive=True HTTP/1.1" 200 None
2025-02-28 15:00:32,896 - modelscope - INFO - Target directory already exists, skipping creation.
Sliding Window Attention is enabled but not implemented for `sdpa`; unexpected results may be encountered.
/home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.
  deprecate("LoRACompatibleLinear", "1.0.0", deprecation_message)
2025-02-28 15:00:55,815 INFO input frame rate=25
[0;93m2025-02-28 15:01:05.288969210 [W:onnxruntime:, transformer_memcpy.cc:74 ApplyImpl] 8 Memcpy nodes are added to the graph main_graph for CUDAExecutionProvider. It might have negative impact on performance (including unable to run CUDA graph). Set session_options.log_severity_level=1 to see the detail logs before this message.[m
[0;93m2025-02-28 15:01:05.294873179 [W:onnxruntime:, session_state.cc:1168 VerifyEachNodeIsAssignedToAnEp] Some nodes were not assigned to the preferred execution providers which may or may not have an negative impact on performance. e.g. ORT explicitly assigns shape related ops to CPU to improve perf.[m
[0;93m2025-02-28 15:01:05.295278054 [W:onnxruntime:, session_state.cc:1170 VerifyEachNodeIsAssignedToAnEp] Rerunning with verbose output on a non-minimal build will show node assignments.[m
2025-02-28 15:01:06,654 WETEXT INFO building fst for zh_normalizer ...
2025-02-28 15:01:06,654 INFO building fst for zh_normalizer ...
2025-02-28 15:01:38,995 WETEXT INFO done
2025-02-28 15:01:38,995 INFO done
2025-02-28 15:01:38,996 WETEXT INFO fst path: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_tagger.fst
2025-02-28 15:01:38,996 INFO fst path: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_tagger.fst
2025-02-28 15:01:38,996 WETEXT INFO           /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_verbalizer.fst
2025-02-28 15:01:38,996 INFO           /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_verbalizer.fst
2025-02-28 15:01:39,002 WETEXT INFO found existing fst: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_tagger.fst
2025-02-28 15:01:39,002 INFO found existing fst: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_tagger.fst
2025-02-28 15:01:39,002 WETEXT INFO                     /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_verbalizer.fst
2025-02-28 15:01:39,002 INFO                     /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_verbalizer.fst
2025-02-28 15:01:39,003 WETEXT INFO skip building fst for en_normalizer ...
2025-02-28 15:01:39,003 INFO skip building fst for en_normalizer ...
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:70: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.llm.load_state_dict(torch.load(llm_model, map_location=self.device), strict=True)
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:72: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.flow.load_state_dict(torch.load(flow_model, map_location=self.device), strict=True)
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:75: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  hift_state_dict = {k.replace('generator.', ''): v for k, v in torch.load(hift_model, map_location=self.device).items()}
failed to import ttsfrd, use WeTextProcessing instead
Downloading Model to directory: /mnt/d/work/story-maker/CosyVoice/pretrained_models/CosyVoice2-0.5B
 * Serving Flask app 'server'
 * Debug mode: off
2025-02-28 15:01:59,869 INFO [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.1.4:8000
2025-02-28 15:01:59,869 INFO [33mPress CTRL+C to quit[0m
  0%|          | 0/16 [00:00<?, ?it/s]2025-02-28 15:02:53,200 INFO synthesis text ###ç¬¬ä¸‰åå››é›†ä¼šå‘å…‰çš„éž‹å­å¤œæ™šé™ä¸´ï¼Œå°é•‡ä¸Šç¯ç«é€šæ˜Žï¼Œä½†è¡—é“ä¸Šçš„è·¯ç¯å´æ˜¾å¾—æœ‰äº›æ˜æš—ã€‚é£žé£žå’Œä»–çš„æœ‹å‹ä»¬å†³å®šæ™šä¸Šå‡ºåŽ»æŽ¢é™©ï¼Œä½†æ¯æ¬¡å‡ºé—¨æ—¶ï¼Œä»–ä»¬æ€»æ˜¯åœ¨é»‘æš—ä¸­ç£•ç£•ç»Šç»Šï¼Œç”šè‡³æœ‰ä¸€æ¬¡å·®ç‚¹æ’žåˆ°äº†è·¯è¾¹åœæ”¾çš„æ±½è½¦ã€‚
[W228 15:03:15.540102040 NNPACK.cpp:61] Could not initialize NNPACK! Reason: Unsupported hardware.
2025-02-28 15:03:19,079 INFO yield speech len 22.24, rtf 1.1636204856762784
  6%|â–‹         | 1/16 [00:27<06:59, 27.93s/it]2025-02-28 15:03:19,702 INFO synthesis text è¿™è®©ä»–ä»¬æ„Ÿåˆ°éžå¸¸å›°æ‰°ã€‚â€œè¦æ˜¯æˆ‘ä»¬èƒ½åœ¨æ™šä¸Šçœ‹å¾—æ›´æ¸…æ¥šå°±å¥½äº†ã€‚â€é£žé£žçš„æœ‹å‹å°æ˜Žè¯´ã€‚â€œæ˜¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ›´å¥½åœ°æŽ¢ç´¢è¿™ä¸ªå°é•‡äº†ã€‚â€å°çº¢é™„å’Œé“ã€‚
2025-02-28 15:03:34,061 INFO yield speech len 13.0, rtf 1.1045590730813832
 12%|â–ˆâ–Ž        | 2/16 [00:42<04:44, 20.31s/it]2025-02-28 15:03:34,549 INFO synthesis text é£žé£žå¬åŽï¼Œå¿ƒé‡ŒèŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•ã€‚ä»–å›žåˆ°å®¶ä¸­ï¼Œèµ°è¿›äº†è‡ªå·±çš„å°å°å®žéªŒå®¤ã€‚æˆ¿é—´é‡Œæ‘†æ»¡äº†å„ç§åºŸæ—§ææ–™å’Œå·¥å…·ï¼Œè¿™äº›éƒ½æ˜¯ä»–å¹³æ—¶æ”¶é›†èµ·æ¥çš„å®è´ã€‚
2025-02-28 15:03:50,741 INFO yield speech len 14.72, rtf 1.099936016227888
 19%|â–ˆâ–‰        | 3/16 [00:59<04:02, 18.65s/it]2025-02-28 15:03:51,228 INFO synthesis text é£žé£žååœ¨æ¡Œå‰ï¼Œå¼€å§‹æ€è€ƒå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚â€œå¦‚æžœæˆ‘èƒ½å‘æ˜Žä¸€åŒä¼šå‘å…‰çš„éž‹å­ï¼Œé‚£è¯¥å¤šå¥½ï¼â€é£žé£žè‡ªè¨€è‡ªè¯­é“ï¼Œâ€œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨æ™šä¸Šå®‰å…¨åœ°è¡Œèµ°äº†ã€‚â€
2025-02-28 15:04:06,614 INFO yield speech len 13.96, rtf 1.1021588285877915
 25%|â–ˆâ–ˆâ–Œ       | 4/16 [01:15<03:30, 17.55s/it]2025-02-28 15:04:07,101 INFO synthesis text é£žé£žé¦–å…ˆæ‰¾æ¥äº†å‡ åŒæ—§è¿åŠ¨éž‹ï¼Œç„¶åŽä»ŽåºŸå¼ƒçš„ç”µå­è®¾å¤‡ä¸­æ‹†ä¸‹äº†LEDç¯å’Œç”µæ± ã€‚ä»–å°†LEDç¯å›ºå®šåœ¨éž‹å­çš„å‰ç«¯å’Œä¾§é¢ï¼Œç”¨å¯¼çº¿è¿žæŽ¥èµ·æ¥ã€‚
2025-02-28 15:04:22,203 INFO yield speech len 13.72, rtf 1.1007483255758925
 31%|â–ˆâ–ˆâ–ˆâ–      | 5/16 [01:31<03:05, 16.85s/it]2025-02-28 15:04:22,690 INFO synthesis text ä¸ºäº†ä½¿éž‹å­èƒ½å¤Ÿæ ¹æ®è„šæ­¥å£°è°ƒèŠ‚äº®åº¦ï¼Œé£žé£žè¿˜å®‰è£…äº†ä¸€ä¸ªå£°éŸ³ä¼ æ„Ÿå™¨ã€‚å½“æœ‰è„šæ­¥å£°æ—¶ï¼Œä¼ æ„Ÿå™¨å°±ä¼šè§¦å‘LEDç¯äº®èµ·ï¼Œä»Žè€Œæä¾›è¶³å¤Ÿçš„å…‰çº¿ã€‚
2025-02-28 15:04:35,878 INFO yield speech len 11.88, rtf 1.110072870447178
 38%|â–ˆâ–ˆâ–ˆâ–Š      | 6/16 [01:44<02:37, 15.77s/it]2025-02-28 15:04:36,363 INFO synthesis text ç»è¿‡å‡ ä¸ªå°æ—¶çš„åŠªåŠ›ï¼Œé£žé£žç»ˆäºŽå®Œæˆäº†ä»–çš„å‘æ˜Žã€‚ä»–ç©¿ä¸Šæ–°å‘æ˜Žçš„éž‹å­ï¼Œèµ°å‡ºå®¶é—¨ï¼Œé‚€è¯·æœ‹å‹ä»¬ä¸€èµ·æ¥è¯•ä¸€è¯•ã€‚ä»–ä»¬æ¥åˆ°å°é•‡çš„ä¸€æ¡ååƒ»å°è·¯ä¸Šï¼Œé‚£é‡Œæ²¡æœ‰è·¯ç¯ï¼Œå¤œè‰²æ˜¾å¾—æ ¼å¤–æ·±æ²‰ã€‚
2025-02-28 15:04:52,637 INFO yield speech len 14.88, rtf 1.0936843932315867
 44%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 7/16 [02:01<02:24, 16.09s/it]2025-02-28 15:04:53,127 INFO synthesis text â€œå‡†å¤‡å¥½äº†å—ï¼Ÿâ€é£žé£žé—®é“ã€‚â€œå½“ç„¶ï¼â€æœ‹å‹ä»¬å¼‚å£åŒå£°åœ°å›žç­”ã€‚é£žé£žçŽ‡å…ˆè¿ˆå‡ºäº†ç¬¬ä¸€æ­¥ï¼Œéšç€ä»–çš„è„šæ­¥å£°å“èµ·ï¼Œéž‹å­å‰ç«¯çš„LEDç¯ç«‹åˆ»äº®äº†èµ·æ¥ï¼Œç…§äº®äº†å‰æ–¹çš„é“è·¯ã€‚
2025-02-28 15:05:08,424 INFO yield speech len 13.88, rtf 1.1021303855720102
 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 8/16 [02:17<02:07, 16.00s/it]2025-02-28 15:05:08,915 INFO synthesis text æœ‹å‹ä»¬è§çŠ¶ï¼Œçº·çº·å…´å¥‹åœ°è·Ÿä¸Šï¼Œä»–ä»¬çš„éž‹å­ä¹Ÿåœ¨è„šæ­¥å£°çš„ä½œç”¨ä¸‹ä¾æ¬¡äº®èµ·ã€‚â€œå“‡ï¼ŒçœŸæ˜¯å¤ªé…·äº†ï¼â€å°æ˜Žèµžå¹é“ã€‚â€œçŽ°åœ¨æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°æŽ¢é™©äº†ï¼â€å°çº¢é«˜å…´åœ°è¯´ã€‚
2025-02-28 15:05:26,726 INFO yield speech len 16.28, rtf 1.0940094837685475
 56%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 9/16 [02:35<01:57, 16.72s/it]2025-02-28 15:05:27,219 INFO synthesis text é£žé£žçœ‹ç€æœ‹å‹ä»¬å¼€å¿ƒçš„æ ·å­ï¼Œå¿ƒä¸­æ„Ÿåˆ°ååˆ†æ»¡è¶³ã€‚ä»–æ„è¯†åˆ°ï¼Œè¿™æ¬¡å‘æ˜Žä¸ä»…ä»…æ˜¯ä¸ºäº†è‡ªå·±ï¼Œæ›´æ˜¯ä¸ºäº†è®©æœ‹å‹ä»¬åœ¨å¤œæ™šä¹Ÿèƒ½å®‰å…¨åœ°å‡ºè¡Œã€‚ä»–æ·±æ·±åœ°ä½“ä¼šåˆ°äº†å…³å¿ƒä»–äººå®‰å…¨çš„é‡è¦æ€§ã€‚
2025-02-28 15:05:46,749 INFO yield speech len 17.96, rtf 1.0874237143382728
 62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž   | 10/16 [02:55<01:46, 17.74s/it]2025-02-28 15:05:47,244 INFO synthesis text â€œä½ ä»¬è§‰å¾—æ€Žä¹ˆæ ·ï¼Ÿâ€é£žé£žé—®é“ã€‚â€œå¤ªæ£’äº†ï¼è°¢è°¢ä½ ï¼Œé£žé£žï¼â€æœ‹å‹ä»¬å¼‚å£åŒå£°åœ°è¯´é“ã€‚é£žé£žç¬‘äº†ç¬‘ï¼Œä»–çŸ¥é“ï¼Œè¿™æ¬¡å‘æ˜Žä¸ä»…è§£å†³äº†ä»–ä»¬æ™šä¸Šå‡ºè¡Œçš„é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ•™ä¼šäº†ä»–ä¸€ä¸ªé‡è¦çš„é“ç† å…³å¿ƒä»–äººçš„å®‰å…¨åŒæ ·é‡è¦ã€‚
2025-02-28 15:06:10,461 INFO yield speech len 21.84, rtf 1.0630516560523064
 69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 11/16 [03:19<01:37, 19.57s/it]2025-02-28 15:06:10,956 INFO synthesis text ä»–å†³å®šå°†è¿™é¡¹å‘æ˜Žåˆ†äº«ç»™æ›´å¤šçš„äººï¼Œè®©æ›´å¤šçš„äººå—ç›Šã€‚â€œæˆ‘ä»¬å¯ä»¥åœ¨ç¤¾åŒºé‡Œä¸¾åŠžä¸€æ¬¡å±•ç¤ºä¼šï¼Œè®©å¤§å®¶éƒ½èƒ½çœ‹åˆ°æˆ‘ä»¬çš„å‘æ˜Žã€‚â€é£žé£žæè®®é“ã€‚â€œå¥½ä¸»æ„ï¼â€æœ‹å‹ä»¬çº·çº·è¡¨ç¤ºèµžåŒã€‚
2025-02-28 15:06:27,604 INFO yield speech len 15.16, rtf 1.0981455799143043
 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 12/16 [03:36<01:15, 18.83s/it]2025-02-28 15:06:28,095 INFO synthesis text ç¬¬äºŒå¤©ï¼Œé£žé£žå’Œæœ‹å‹ä»¬åœ¨ç¤¾åŒºä¸­å¿ƒä¸¾åŠžäº†ä¸€åœºå°åž‹å±•ç¤ºä¼šã€‚ä»–ä»¬å‘å¤§å®¶å±•ç¤ºäº†è¿™åŒä¼šå‘å…‰çš„éž‹å­ï¼Œå¹¶è¯¦ç»†ä»‹ç»äº†å®ƒçš„åŠŸèƒ½å’ŒåŽŸç†ã€‚è®¸å¤šå±…æ°‘éƒ½è¢«è¿™é¡¹å‘æ˜Žæ‰€å¸å¼•ï¼Œçº·çº·å‰æ¥ä½“éªŒã€‚
2025-02-28 15:06:45,281 INFO yield speech len 16.08, rtf 1.0687873434664599
 81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 13/16 [03:54<00:55, 18.48s/it]2025-02-28 15:06:45,770 INFO synthesis text â€œè¿™çœŸæ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„å‘æ˜Žï¼â€ä¸€ä½é˜¿å§¨èµžå¹é“ã€‚â€œè°¢è°¢ä½ ä»¬çš„åˆ†äº«ï¼Œè¿™å¯¹æˆ‘ä»¬çš„å®‰å…¨å‡ºè¡Œæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚â€å¦ä¸€ä½å”å”æ„Ÿæ¿€åœ°è¯´ã€‚é£žé£žå’Œæœ‹å‹ä»¬æ„Ÿåˆ°éžå¸¸è‡ªè±ªï¼Œä»–ä»¬çŸ¥é“ï¼Œè¿™æ¬¡å‘æ˜Žä¸ä»…ä¸ºä»–ä»¬å¸¦æ¥äº†ä¹è¶£ï¼Œæ›´ä¸ºç¤¾åŒºçš„å®‰å…¨åšå‡ºäº†è´¡çŒ®ã€‚
2025-02-28 15:07:07,942 INFO yield speech len 20.44, rtf 1.0847433789135659
 88%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š | 14/16 [04:16<00:39, 19.74s/it]2025-02-28 15:07:08,440 INFO synthesis text ä»–ä»¬ç›¸ä¿¡ï¼Œåªè¦ç”¨å¿ƒåŽ»å‘çŽ°å’Œåˆ›é€ ï¼Œå°±ä¸€å®šèƒ½è®©è¿™ä¸ªä¸–ç•Œå˜å¾—æ›´åŠ ç¾Žå¥½ã€‚é€šè¿‡è¿™æ¬¡ç»åŽ†ï¼Œé£žé£žæ·±åˆ»åœ°ä½“ä¼šåˆ°äº†ç§‘å­¦çš„é­…åŠ›å’Œåˆ›é€ åŠ›çš„åŠ›é‡ã€‚
2025-02-28 15:07:21,542 INFO yield speech len 11.84, rtf 1.106620640368075
 94%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 15/16 [04:30<00:17, 17.89s/it]2025-02-28 15:07:22,028 INFO synthesis text ä»–å­¦ä¼šäº†å…³å¿ƒä»–äººçš„å®‰å…¨ï¼Œä¹Ÿæ˜Žç™½äº†å›¢é˜Ÿåˆä½œçš„é‡è¦æ€§ã€‚ä»–ç›¸ä¿¡ï¼Œæœªæ¥è¿˜æœ‰æ›´å¤šçš„å‘æ˜Žç­‰å¾…ç€ä»–åŽ»æŽ¢ç´¢å’Œå®žçŽ°ã€‚
2025-02-28 15:07:31,669 INFO yield speech len 8.6, rtf 1.1209828909053359
100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 16/16 [04:40<00:00, 15.55s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 16/16 [04:40<00:00, 17.53s/it]
2025-02-28 15:07:31,936 INFO 192.168.1.24 - - [28/Feb/2025 15:07:31] "POST /get_voice_remote HTTP/1.1" 200 -
