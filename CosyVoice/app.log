2025-02-28 15:00:32,135 DEBUG Starting new HTTPS connection (1): www.modelscope.cn:443
2025-02-28 15:00:32,452 DEBUG https://www.modelscope.cn:443 "GET /api/v1/models/iic/CosyVoice2-0.5B/revisions HTTP/1.1" 200 205
2025-02-28 15:00:32,865 DEBUG https://www.modelscope.cn:443 "GET /api/v1/models/iic/CosyVoice2-0.5B/repo/files?Revision=master&Recursive=True HTTP/1.1" 200 None
2025-02-28 15:00:32,896 - modelscope - INFO - Target directory already exists, skipping creation.
Sliding Window Attention is enabled but not implemented for `sdpa`; unexpected results may be encountered.
/home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.
  deprecate("LoRACompatibleLinear", "1.0.0", deprecation_message)
2025-02-28 15:00:55,815 INFO input frame rate=25
[0;93m2025-02-28 15:01:05.288969210 [W:onnxruntime:, transformer_memcpy.cc:74 ApplyImpl] 8 Memcpy nodes are added to the graph main_graph for CUDAExecutionProvider. It might have negative impact on performance (including unable to run CUDA graph). Set session_options.log_severity_level=1 to see the detail logs before this message.[m
[0;93m2025-02-28 15:01:05.294873179 [W:onnxruntime:, session_state.cc:1168 VerifyEachNodeIsAssignedToAnEp] Some nodes were not assigned to the preferred execution providers which may or may not have an negative impact on performance. e.g. ORT explicitly assigns shape related ops to CPU to improve perf.[m
[0;93m2025-02-28 15:01:05.295278054 [W:onnxruntime:, session_state.cc:1170 VerifyEachNodeIsAssignedToAnEp] Rerunning with verbose output on a non-minimal build will show node assignments.[m
2025-02-28 15:01:06,654 WETEXT INFO building fst for zh_normalizer ...
2025-02-28 15:01:06,654 INFO building fst for zh_normalizer ...
2025-02-28 15:01:38,995 WETEXT INFO done
2025-02-28 15:01:38,995 INFO done
2025-02-28 15:01:38,996 WETEXT INFO fst path: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_tagger.fst
2025-02-28 15:01:38,996 INFO fst path: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_tagger.fst
2025-02-28 15:01:38,996 WETEXT INFO           /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_verbalizer.fst
2025-02-28 15:01:38,996 INFO           /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/zh_tn_verbalizer.fst
2025-02-28 15:01:39,002 WETEXT INFO found existing fst: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_tagger.fst
2025-02-28 15:01:39,002 INFO found existing fst: /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_tagger.fst
2025-02-28 15:01:39,002 WETEXT INFO                     /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_verbalizer.fst
2025-02-28 15:01:39,002 INFO                     /home/ppx/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/tn/en_tn_verbalizer.fst
2025-02-28 15:01:39,003 WETEXT INFO skip building fst for en_normalizer ...
2025-02-28 15:01:39,003 INFO skip building fst for en_normalizer ...
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:70: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.llm.load_state_dict(torch.load(llm_model, map_location=self.device), strict=True)
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:72: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.flow.load_state_dict(torch.load(flow_model, map_location=self.device), strict=True)
/mnt/d/work/story-maker/CosyVoice/cosyvoice/cli/model.py:75: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  hift_state_dict = {k.replace('generator.', ''): v for k, v in torch.load(hift_model, map_location=self.device).items()}
failed to import ttsfrd, use WeTextProcessing instead
Downloading Model to directory: /mnt/d/work/story-maker/CosyVoice/pretrained_models/CosyVoice2-0.5B
 * Serving Flask app 'server'
 * Debug mode: off
2025-02-28 15:01:59,869 INFO [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.1.4:8000
2025-02-28 15:01:59,869 INFO [33mPress CTRL+C to quit[0m
  0%|          | 0/16 [00:00<?, ?it/s]2025-02-28 15:02:53,200 INFO synthesis text ###第三十四集会发光的鞋子夜晚降临，小镇上灯火通明，但街道上的路灯却显得有些昏暗。飞飞和他的朋友们决定晚上出去探险，但每次出门时，他们总是在黑暗中磕磕绊绊，甚至有一次差点撞到了路边停放的汽车。
[W228 15:03:15.540102040 NNPACK.cpp:61] Could not initialize NNPACK! Reason: Unsupported hardware.
2025-02-28 15:03:19,079 INFO yield speech len 22.24, rtf 1.1636204856762784
  6%|▋         | 1/16 [00:27<06:59, 27.93s/it]2025-02-28 15:03:19,702 INFO synthesis text 这让他们感到非常困扰。“要是我们能在晚上看得更清楚就好了。”飞飞的朋友小明说。“是，这样我们就能更好地探索这个小镇了。”小红附和道。
2025-02-28 15:03:34,061 INFO yield speech len 13.0, rtf 1.1045590730813832
 12%|█▎        | 2/16 [00:42<04:44, 20.31s/it]2025-02-28 15:03:34,549 INFO synthesis text 飞飞听后，心里萌生了一个想法。他回到家中，走进了自己的小小实验室。房间里摆满了各种废旧材料和工具，这些都是他平时收集起来的宝贝。
2025-02-28 15:03:50,741 INFO yield speech len 14.72, rtf 1.099936016227888
 19%|█▉        | 3/16 [00:59<04:02, 18.65s/it]2025-02-28 15:03:51,228 INFO synthesis text 飞飞坐在桌前，开始思考如何解决这个问题。“如果我能发明一双会发光的鞋子，那该多好！”飞飞自言自语道，“这样我们就能在晚上安全地行走了。”
2025-02-28 15:04:06,614 INFO yield speech len 13.96, rtf 1.1021588285877915
 25%|██▌       | 4/16 [01:15<03:30, 17.55s/it]2025-02-28 15:04:07,101 INFO synthesis text 飞飞首先找来了几双旧运动鞋，然后从废弃的电子设备中拆下了LED灯和电池。他将LED灯固定在鞋子的前端和侧面，用导线连接起来。
2025-02-28 15:04:22,203 INFO yield speech len 13.72, rtf 1.1007483255758925
 31%|███▏      | 5/16 [01:31<03:05, 16.85s/it]2025-02-28 15:04:22,690 INFO synthesis text 为了使鞋子能够根据脚步声调节亮度，飞飞还安装了一个声音传感器。当有脚步声时，传感器就会触发LED灯亮起，从而提供足够的光线。
2025-02-28 15:04:35,878 INFO yield speech len 11.88, rtf 1.110072870447178
 38%|███▊      | 6/16 [01:44<02:37, 15.77s/it]2025-02-28 15:04:36,363 INFO synthesis text 经过几个小时的努力，飞飞终于完成了他的发明。他穿上新发明的鞋子，走出家门，邀请朋友们一起来试一试。他们来到小镇的一条偏僻小路上，那里没有路灯，夜色显得格外深沉。
2025-02-28 15:04:52,637 INFO yield speech len 14.88, rtf 1.0936843932315867
 44%|████▍     | 7/16 [02:01<02:24, 16.09s/it]2025-02-28 15:04:53,127 INFO synthesis text “准备好了吗？”飞飞问道。“当然！”朋友们异口同声地回答。飞飞率先迈出了第一步，随着他的脚步声响起，鞋子前端的LED灯立刻亮了起来，照亮了前方的道路。
2025-02-28 15:05:08,424 INFO yield speech len 13.88, rtf 1.1021303855720102
 50%|█████     | 8/16 [02:17<02:07, 16.00s/it]2025-02-28 15:05:08,915 INFO synthesis text 朋友们见状，纷纷兴奋地跟上，他们的鞋子也在脚步声的作用下依次亮起。“哇，真是太酷了！”小明赞叹道。“现在我们可以放心地探险了！”小红高兴地说。
2025-02-28 15:05:26,726 INFO yield speech len 16.28, rtf 1.0940094837685475
 56%|█████▋    | 9/16 [02:35<01:57, 16.72s/it]2025-02-28 15:05:27,219 INFO synthesis text 飞飞看着朋友们开心的样子，心中感到十分满足。他意识到，这次发明不仅仅是为了自己，更是为了让朋友们在夜晚也能安全地出行。他深深地体会到了关心他人安全的重要性。
2025-02-28 15:05:46,749 INFO yield speech len 17.96, rtf 1.0874237143382728
 62%|██████▎   | 10/16 [02:55<01:46, 17.74s/it]2025-02-28 15:05:47,244 INFO synthesis text “你们觉得怎么样？”飞飞问道。“太棒了！谢谢你，飞飞！”朋友们异口同声地说道。飞飞笑了笑，他知道，这次发明不仅解决了他们晚上出行的问题，更重要的是，它教会了他一个重要的道理 关心他人的安全同样重要。
2025-02-28 15:06:10,461 INFO yield speech len 21.84, rtf 1.0630516560523064
 69%|██████▉   | 11/16 [03:19<01:37, 19.57s/it]2025-02-28 15:06:10,956 INFO synthesis text 他决定将这项发明分享给更多的人，让更多的人受益。“我们可以在社区里举办一次展示会，让大家都能看到我们的发明。”飞飞提议道。“好主意！”朋友们纷纷表示赞同。
2025-02-28 15:06:27,604 INFO yield speech len 15.16, rtf 1.0981455799143043
 75%|███████▌  | 12/16 [03:36<01:15, 18.83s/it]2025-02-28 15:06:28,095 INFO synthesis text 第二天，飞飞和朋友们在社区中心举办了一场小型展示会。他们向大家展示了这双会发光的鞋子，并详细介绍了它的功能和原理。许多居民都被这项发明所吸引，纷纷前来体验。
2025-02-28 15:06:45,281 INFO yield speech len 16.08, rtf 1.0687873434664599
 81%|████████▏ | 13/16 [03:54<00:55, 18.48s/it]2025-02-28 15:06:45,770 INFO synthesis text “这真是一个了不起的发明！”一位阿姨赞叹道。“谢谢你们的分享，这对我们的安全出行有很大的帮助。”另一位叔叔感激地说。飞飞和朋友们感到非常自豪，他们知道，这次发明不仅为他们带来了乐趣，更为社区的安全做出了贡献。
2025-02-28 15:07:07,942 INFO yield speech len 20.44, rtf 1.0847433789135659
 88%|████████▊ | 14/16 [04:16<00:39, 19.74s/it]2025-02-28 15:07:08,440 INFO synthesis text 他们相信，只要用心去发现和创造，就一定能让这个世界变得更加美好。通过这次经历，飞飞深刻地体会到了科学的魅力和创造力的力量。
2025-02-28 15:07:21,542 INFO yield speech len 11.84, rtf 1.106620640368075
 94%|█████████▍| 15/16 [04:30<00:17, 17.89s/it]2025-02-28 15:07:22,028 INFO synthesis text 他学会了关心他人的安全，也明白了团队合作的重要性。他相信，未来还有更多的发明等待着他去探索和实现。
2025-02-28 15:07:31,669 INFO yield speech len 8.6, rtf 1.1209828909053359
100%|██████████| 16/16 [04:40<00:00, 15.55s/it]100%|██████████| 16/16 [04:40<00:00, 17.53s/it]
2025-02-28 15:07:31,936 INFO 192.168.1.24 - - [28/Feb/2025 15:07:31] "POST /get_voice_remote HTTP/1.1" 200 -
